{% extends 'base.html' %}

{% load static %}

{% block title %}All Items{% endblock %}
{% block content %}
        <h1>ðŸ›’ Merch Store</h1>
        <h2>Hi {{ user.get_username }}!</h2>
        <br>
        {% if not request.user.is_authenticated %}
            <h3> ALL PRODUCTS </h3>
            {% for product_type in object_list %}
                <h4>{{ product_type.name }}: {{ product_type.description }}</h4>
                    {% for product in product_type.type.all %}
                    <li>
                        <a href="{{ product.get_absolute_url }}">{{ product.name }}</a>
                    </li>
                    {% endfor %}
                    <br>
            {% endfor %}

        {% else %}
            <h3>{{ user.get_username }}'s PRODUCTS</h3>
            {% for product_type in object_list %}
            <h4>{{ product_type.name }}: {{ product_type.description }}</h4>
                    {% for product in product_type.type.all %}
                        {% if product.owner.user == user %}
                        <li>
                            <a href="{{ product.get_absolute_url }}">{{ product.owner.user.get_username }}: {{ product.name }}</a>
                        </li>
                        {% endif %}
                        <br>
                    {% endfor %}
            {% endfor %}

            <h3> ALL PRODUCTS</h3>
            {% for product_type in object_list %}
            <h4>{{ product_type.name }}: {{ product_type.description }}</h4>
                    {% for product in product_type.type.all %}
                        {% if product.owner.user != user %}
                        <li>
                            <a href="{{ product.get_absolute_url }}">{{ product.owner.user.get_username }}: {{ product.name }}</a>
                        </li>
                        {% endif %}
                        <br>
                    {% endfor %}
            {% endfor %}
        {% endif %}

        <br>
        <hr>
        <h4>Want to create a new product? Click <a href="{% url 'merchstore:merch-add' %}">Here</a>
        
        {% if request.user.is_authenticated %}
            <a href="{% url 'user_management:profile' username=user.username %}">Go pack to profile</a>
        {% endif %}
        
{% endblock %}